@model Church_Connect.User_Account

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";
}

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <div class="text-wrap2">
        <div class="form-horizontal">
            <h2>Create Account</h2>
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @Html.LabelFor(model => model.Username, htmlAttributes: new { @class = "control-label col-md-2" })
                <br />
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Username, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Username, "", new { @class = "text-danger" })
                    <br />
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Password, htmlAttributes: new { @class = "control-label col-md-2" })
                <br />
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Password, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Password, "", new { @class = "text-danger" })
                    <br />
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Role, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.DropDownListFor(model => model.Role, new SelectList(
                new List<Object>{
                new { Value = 1 , Text = "User" },
                new { Value = 2 , Text = "Admin" }
                },
                "Value",
                "Text"
                 ), "Select User Type", new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.Role, "", new { @class = "text-danger" })
                </div>

            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <br />
                    <input type="submit" value="Create" class="btn btn-default" />
                </div>
            </div>
        </div>
    </div>
    <div class="table-container">
        <!-- Table to display list of accounts -->
        <h2>List of Accounts</h2>
        <div class="table-wrapper">
            <table class="account-table">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Password</th>
                        <th>Role</th>
                        <th>Action</th> <!-- Add a new column for action buttons -->
                    </tr>
                </thead>
                <tbody>
                    @foreach (var account in ViewBag.Accounts)
                {
                        <tr>
                            <td>@account.Username</td>
                            <td>@account.Password</td>
                            <td>
                                @{
                                    // Use a conditional statement to display "Admin" or "User" based on the Role value
                                    if (account.Role == 1)
                                    {
                                        <text>User</text>
                                    }
                                    else if (account.Role == 2)
                                    {
                                        <text>Admin</text>
                                    }
                                }
                            </td>
                            <td>
                                <!-- Edit button -->
                                <a href="@Url.Action("Edit", "Home", new { id = account.UserID })" class="btn btn-primary">Edit</a>

                                <!-- Delete button -->
                                <form action="@Url.Action("Delete", "Home", new { id = account.UserID })" method="post" style="display: inline;">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this account?')">Delete</button>
                                </form>
                            </td>
                        </tr>
                                    }
                </tbody>
            </table>
        </div>
    </div>

                                    }
